generator client {
  provider = "prisma-client-js"
}

generator zod {
  provider = "zod-prisma-types"
  output   = "../src/modelSchemas"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int     @id @default(autoincrement())
  username  String  @unique()
  passHash  String
  passSalt  String
  createdAt Int
  isActive  Boolean @default(true)
  isAdmin   Boolean @default(false)

  devices Device[]
  areas   Area[]
}

enum DeviceType {
  Temperature
  Relay
}

model Device {
  id          Int        @id @default(autoincrement())
  name        String
  description String
  isConnected Boolean    @default(false)
  uuid        String     @unique
  type        DeviceType

  user   User? @relation(fields: [userId], references: [id])
  userId Int?

  area   Area? @relation(fields: [areaId], references: [id])
  areaId Int?
}

enum AreaType {
  Room
}

model Area {
  id          Int      @id @default(autoincrement())
  name        String
  description String
  type        AreaType

  user   User     @relation(fields: [userId], references: [id])
  userId Int
  Device Device[]
}
